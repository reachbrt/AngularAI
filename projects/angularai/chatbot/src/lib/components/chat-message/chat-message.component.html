<div class="message" [class.user]="isUser" [class.assistant]="isAssistant" [class.streaming]="message.isStreaming" [class.with-avatar]="showAvatar">
  @if (showAvatar) {
    <div class="avatar">{{ avatarEmoji }}</div>
  }

  <div class="message-body">
    <div class="message-header">
      <span class="role">{{ roleLabel }}</span>
      @if (showTimestamp) {
        <span class="timestamp">{{ formattedTime }}</span>
      }
    </div>

    <div class="message-content" [innerHTML]="enableMarkdown ? formattedContent : message.content">
    </div>

    @if (message.isStreaming) {
      <span class="cursor">▋</span>
    }

    @if (message.error) {
      <div class="message-error">
        ⚠️ {{ message.error }}
      </div>
    }
  </div>
</div>

