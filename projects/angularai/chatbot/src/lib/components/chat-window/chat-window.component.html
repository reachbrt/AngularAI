<div class="chat-window" [ngClass]="getContainerClasses()">
  <div class="chat-header">
    <div class="chat-title">
      <span class="status-dot" [class.active]="!isLoading"></span>
      {{ title }}
    </div>
    <button class="clear-btn" (click)="onClearChat()" [title]="getLabel('clear')">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3,6 5,6 21,6"></polyline>
        <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2v2"></path>
      </svg>
    </button>
  </div>

  <div class="messages-container" #messagesContainer>
    @if (messages.length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ðŸ’¬</div>
        <p>Start a conversation</p>
      </div>
    }

    @for (message of messages; track message.id) {
      <ai-chat-message
        [message]="message"
        [showTimestamp]="showTimestamps"
        [showAvatar]="showAvatars"
        [enableMarkdown]="enableMarkdown">
      </ai-chat-message>
    }

    @if (isLoading) {
      <div class="typing-indicator">
        <span class="typing-text">{{ getLabel('loading') }}</span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    }
  </div>

  <ai-chat-input
    [placeholder]="placeholder"
    [disabled]="isLoading"
    [sendButtonText]="getLabel('send')"
    (send)="onSendMessage($event)">
  </ai-chat-input>
</div>

